(this.webpackJsonponspot=this.webpackJsonponspot||[]).push([[0],{348:function(e,t,a){e.exports=a(612)},353:function(e,t,a){},416:function(e,t,a){},612:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),l=(a(353),a(14)),c=a(15),s=a(17),m=a(16),u="931605938000-h3ncbkbjnr4pp91240khg2bnbt0c8d14.apps.googleusercontent.com",p="AIzaSyCjcr4UkZIMv8ncU8-6_77Jk8q7IugpH0g",d="https://www.onspot.click",g=d+"/api/user/validate",h=a(45),f=a(74),b=a(161),E=a.n(b),v=(a(354),a(659)),y=a(4),x=a(163),C=a(78),S=a(288),w=a.n(S),k=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"handleTakePhoto",value:function(e){console.log("takePhoto")}},{key:"handleTakePhotoAnimationDone",value:function(e){console.log("takePhoto",e)}},{key:"handleCameraError",value:function(e){console.log("handleCameraError",e)}},{key:"handleCameraStart",value:function(e){console.log("handleCameraStart")}},{key:"handleCameraStop",value:function(){console.log("handleCameraStop")}},{key:"render",value:function(){var e=this;return o.a.createElement(x.a,{variant:"outlined",style:{width:"80%",marginLeft:"10%",marginTop:"150px"}},o.a.createElement(v.a,{color:"secondary",variant:"contained",style:{zIndex:1,float:"right",marginBottom:"10px",marginRight:"10px",marginTop:"10px"},onClick:function(){return e.props.cameraClosed()}},"Close Camera \xa0",o.a.createElement(w.a,null)),o.a.createElement(E.a,{onTakePhoto:function(t){e.props.onCapture(t)},onTakePhotoAnimationDone:function(t){e.handleTakePhotoAnimationDone(t)},onCameraError:function(t){e.handleCameraError(t)},idealFacingMode:b.FACING_MODES.ENVIRONMENT,idealResolution:{width:600,height:480},imageType:b.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!0,isImageMirror:!1,isSilentMode:!1,isDisplayStartCameraError:!0,isFullscreen:!1,sizeFactor:1,onCameraStart:function(t){e.handleCameraStart(t)},onCameraStop:function(){e.handleCameraStop()}}),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p",style:{marginTop:"-5px",textAlign:"center",fontSize:"18px",backgroundColor:"#2997f7",color:"white"}},o.a.createElement("b",null,"Click a Picture with a Pothole to get started!")))}}]),a}(o.a.Component),O=Object(y.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"480px",marginRight:"10px",marginLeft:"10px"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(k),L=a(199),j=(a(359),a(289)),I=a.n(j),R=a(290),T=a.n(R),D=(a(360),a(291)),B=a.n(D),N=a(292),F=a.n(N);Object(L.registerPlugin)(I.a,T.a,B.a,F.a);var A=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"handleInit",value:function(){this.props.updateFilePondRef(this.pond)}},{key:"loaded",value:function(e){var t=JSON.parse(e).filename[0];this.props.validation(t)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:"App",style:{marginTop:"100px",marginLeft:"20px",marginRight:"20px",display:this.props.display}},o.a.createElement(x.a,{variant:"outlined",className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(L.FilePond,{ref:function(t){return e.pond=t},acceptedFileTypes:["image/png","image/jpg","image/jpeg"],labelIdle:this.props.label,allowMultiple:!1,oninit:function(){return e.handleInit()},maxFileSize:"10MB",allowFileSizeValidation:!0,server:{process:{url:"https://www.onspot.click/api/upload",onload:function(t){return e.loaded(t)}}}}))))}}]),a}(o.a.Component),P=Object(y.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"500px",marginRight:"10px",marginLeft:"10px",maxWidth:"60%",position:"relative",top:"50%",transform:"translate(32%, 20%)"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(A),U=a(25),M=a.n(U),W=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),M.a.post("https://www.onspot.click/api/detect/single",{image_url:e.imageURL}).then((function(t){e.validationCompleted(t)})).catch((function(e){console.info("Unable to validate image!")})),n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),a}(o.a.Component),z=a(56),_=a(689),q=a(692),G=a(296),V=a.n(G),H=a(226),Y=a(225),J=a(293),K=a.n(J),Z=a(294),$=a.n(Z),Q=a(694),X=a(160),ee=a.n(X);var te={current:null},ae=Object(Y.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)},textInput:{marginBottom:"10px"},labelText:{marginTop:"25px",marginBottom:"10px"},buttonCurrentLocation:{marginBottom:"15px"}}}));function ne(e){var t=ae(),a=o.a.useState(""),n=Object(z.a)(a,2),r=n[0],i=n[1],l=o.a.useState([]),c=Object(z.a)(l,2),s=c[0],m=c[1],u=o.a.useState(!1),d=Object(z.a)(u,2),g=d[0],h=d[1],f=o.a.useState(""),b=Object(z.a)(f,1)[0],E=o.a.useState(""),v=Object(z.a)(E,1)[0],y=o.a.useRef(!1);"undefined"===typeof window||y.current||(document.querySelector("#google-maps")||function(e,t,a){if(t){var n=document.createElement("script");n.setAttribute("async",""),n.setAttribute("id",a),n.src=e,t.appendChild(n)}}("https://maps.googleapis.com/maps/api/js?key="+p+"&libraries=places",document.querySelector("head"),"google-maps"),y.current=!0);var x=function(t){i(t.target.value),""!==t.target.value.trim()?h(!1):h(!0),console.info("The field is now required",g),""===t.target.value.trim()&&void 0===e.currentLocationOptional&&e.updateLocation(b)},S=o.a.useMemo((function(){return $()((function(e,t){te.current.getPlacePredictions(e,t)}),200)}),[]);o.a.useEffect((function(){var e=!0;if(!te.current&&window.google&&(te.current=new window.google.maps.places.AutocompleteService),te.current){if(""!==r)return S({input:r},(function(t){e&&m(t||[])})),function(){e=!1};m([])}}),[r,S]);return o.a.createElement("div",null,o.a.createElement(C.a,{gutterBottom:!0,className:t.labelText},e.label||"Tag Pothole's Location"),o.a.createElement(q.a,{id:"google-map-demo",getOptionLabel:function(e){return"string"===typeof e?e:e.description},filterOptions:function(e){return e},options:s,autoComplete:!0,includeInputInList:!0,disableOpenOnFocus:!0,fullWidth:!0,onChange:function(t,a){try{M.a.get("https://maps.googleapis.com/maps/api/geocode/json?place_id="+a.place_id+"&key="+p).then((function(t){e.updateLocation(a.description,t.data.results[0].geometry.location)}))}catch(n){e.updateLocation(b,v)}},renderInput:function(e){return o.a.createElement(_.a,Object.assign({},e,{label:"Add a location",variant:"outlined",fullWidth:!0,className:t.textInput,onChange:x}))},renderOption:function(e){var a=e.structured_formatting.main_text_matched_substrings,n=K()(e.structured_formatting.main_text,a.map((function(e){return[e.offset,e.offset+e.length]})));return o.a.createElement(H.a,{container:!0,alignItems:"center"},o.a.createElement(H.a,{item:!0},o.a.createElement(V.a,{className:t.icon})),o.a.createElement(H.a,{item:!0,xs:!0},n.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),o.a.createElement(C.a,{variant:"body2",color:"textSecondary"},e.structured_formatting.secondary_text)))}}),void 0===e.currentLocationOptional&&o.a.createElement("div",null," ",o.a.createElement("h5",{style:{color:"white",textAlign:"center",fontWeight:"bold"}},"OR"),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("i",null,"(Will Use Current Location Instead)")),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(Q.a,{style:{marginBottom:"25px",marginTop:"7px"},icon:o.a.createElement(ee.a,null),label:e.permissionLocationValue,variant:"outlined",color:"primary"}))," "))}var oe,re,ie=a(695),le=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={value:5},n.handleChange=function(e,t){n.setState({value:t}),n.props.updateSeverity(t)},e.updateSeverity(n.state.value),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return o.a.createElement("div",{className:e.root},o.a.createElement(C.a,{gutterBottom:!0},"Severity Rate ",o.a.createElement("i",null,"(Choose a value between 0-10)")),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ie.a,{classes:{container:e.slider},value:t,min:1,max:10,step:1,onChange:this.handleChange,valueLabelDisplay:"on"}))}}]),a}(o.a.Component),ce=Object(y.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(le),se=a(668),me=a(671),ue=a(670),pe=a(669),de=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).makeEmpty=function(){n.setState({content:""}),n.checkRequired(n.textFieldRef.current,"required")},n.checkRequired=function(e,t){var a=e.value.trim();""!==a?n.setState({errorRequired:!1,content:e.value}):n.setState({errorRequired:void 0===t,content:e.value}),n.props.updateDescription(a)},n.state={errorRequired:!1,content:""},n.textFieldRef=o.a.createRef(),e.passMakeEmpty(n.makeEmpty),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,{style:{marginBottom:"10px",marginTop:"5px"},gutterBottom:!0},"Add Comment"),o.a.createElement(_.a,{inputRef:this.textFieldRef,error:this.state.errorRequired,onChange:function(t){return e.checkRequired(t.target)},required:!0,fullWidth:!0,variant:"outlined",placeholder:"Supporting comments on the report",multiline:!0,rows:4,rowsMax:50,label:"Additional Comments (Required)",value:this.state.content}))}}]),a}(o.a.Component),ge=a(663),he=a(667),fe=a(665),be=a(666),Ee=a(664),ve=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleClose=function(){void 0!==e.props.linkTo&&(window.location.href="/onspot/#"+e.props.linkTo,window.location.reload()),e.props.updateCloseDialogState()},e.justClose=function(){e.props.updateCloseDialogState()},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(ge.a,{open:this.props.dialogOpenState,onClose:function(){return e.justClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Ee.a,{id:"alert-dialog-title"},this.props.title),o.a.createElement(fe.a,null,o.a.createElement(be.a,{id:"alert-dialog-description"},this.props.content)),o.a.createElement(he.a,null,o.a.createElement(v.a,{onClick:function(){return e.handleClose()},color:this.props.color,autoFocus:!0},this.props.buttonText),void 0!==this.props.linkTo&&o.a.createElement(v.a,{onClick:function(){return e.justClose()},color:"primary",autoFocus:!0},"No"))))}}]),a}(o.a.Component),ye=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setLocation=function(e,t){n.state.location!==e&&oe.setState({location:e,locationLatLng:t})},n.setPermissionBasedLocation=function(e,t){n.state.location!==e&&oe.setState({permissionLocation:e,permissionLocationLatLng:t})},n.showPosition=function(e){M.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.coords.latitude+","+e.coords.longitude+"&key="+p).then((function(e){n.setPermissionBasedLocation(e.data.results[0].formatted_address,e.data.results[0].geometry.location)}),(function(e){console.info("Cannot update current location")}))},n.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(n.showPosition):console.info("Geolocation is not supported by this browser.")},n.setSeverity=function(e){oe.setState({severity:e})},n.setDescription=function(e){oe.setState({description:e})},n.updateCloseDialogState=function(){oe.setState({dialogOpenState:!1})},n.updateCancelDialogState=function(){oe.setState({cancelDialogOpenState:!1})},n.submitForm=function(){var e,t;""===n.state.location&&""===n.state.permissionLocation?e="":""!==n.state.location?(e=n.state.location,t=n.state.locationLatLng):(e=n.state.permissionLocation,t=n.state.permissionLocationLatLng),""===n.state.description||""===e||""===n.state.severity?n.setState({dialogOpenState:!0}):(n.setState({dialogOpenState:!1}),M.a.post("https://www.onspot.click/api/submit/report",{data:{description:n.state.description,location:e,locationLatLng:t,imageURL:n.state.imageURL,userId:n.state.userId,severity:n.state.severity}}).then((function(e){n.setState({showSubmittedFeedback:!0})}),(function(e){console.info("Problem with submitting your report")})))},n.makeEmpty=function(e){oe.setState({makeBoxEmptyFunction:e})},n.showCancelAlert=function(){oe.setState({cancelDialogOpenState:!0})},n.navigateToNewReport=function(){window.location.reload()},n.state={imageURL:e.reportData.split(" : ")[0],location:"",severity:"",description:"",dialogOpenState:!1,cancelDialogOpenState:!1,locationLatLng:"",makeBoxEmptyFunction:"",showSubmittedFeedback:!1,permissionLocation:"",permissionLocationLatLng:"",userId:e.userId},oe=Object(f.a)(n),n.getLocation(),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",null,!this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(se.a,{className:t.root},o.a.createElement(pe.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(ue.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Create Report"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"We were able to identify one or more potholes in the image you provided. Please fill the rest of the details to file an official complaint. Once you create a report and it gets approved you cannot cancel the request made until resolved by the the concerned authority. Don't forget to add supporting comments to your report."),o.a.createElement(ne,{updateLocation:this.setLocation,permissionLocationValue:this.state.permissionLocation}),o.a.createElement(ce,{updateSeverity:this.setSeverity}),o.a.createElement(de,{passMakeEmpty:this.makeEmpty,updateDescription:this.setDescription})),o.a.createElement(me.a,null,o.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.submitForm()}},"Submit"),o.a.createElement(v.a,{size:"small",color:"secondary",onClick:function(){return e.showCancelAlert()}},"Cancel"))),o.a.createElement(ve,{dialogOpenState:this.state.cancelDialogOpenState,updateCloseDialogState:this.updateCancelDialogState,title:"Cancel Reporting!",content:"Are you sure you want to cancel?",buttonText:"Yes, Cancel Report",linkTo:"/report",color:"secondary"}),o.a.createElement(ve,{dialogOpenState:this.state.dialogOpenState,updateCloseDialogState:this.updateCloseDialogState,title:"Required Fields Validation",content:"One or more required fields are empty!",buttonText:"OK",color:"primary"})),!("Your image is valid!"===this.props.reportData.split(" : ")[1])&&o.a.createElement("div",null,o.a.createElement(se.a,{className:t.root},o.a.createElement(pe.a,{component:"img",alt:"Not Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Not Validated Pothole Image"}),o.a.createElement(ue.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Seems Like an Invalid Image"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"There does not seem to be a pothole in this image. Please retry with a different image. If you feel you have uploaded a correct image feel free to email us at"," ",o.a.createElement("a",{href:"mailto:contact.onspot@gmail.com"},"contact.onspot@gmail.com"))),o.a.createElement(me.a,{style:{marginTop:"10px"}},o.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.navigateToNewReport()}},"Retry"),o.a.createElement(h.b,{to:"/dashboard"},o.a.createElement(v.a,{size:"small",color:"primary"},"Go to My Complaints"))))),this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(se.a,{className:t.root},o.a.createElement(pe.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(ue.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Complaint Registered!"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Thank you for submitting the report. A concerned authority will get back to you. You can find the new report and monitor it's status in the"," ",o.a.createElement(h.b,{to:"/dashboard"},"My Complaints")," section."),o.a.createElement("br",null),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Keep a track of your report through the comments section and feel free to exchange more thoughts with the concerned authority too. You can even email us at"," ",o.a.createElement("a",{href:"mailto:contact.onspot@gmail.com"},"contact.onspot@gmail.com")," ","for more questions.")),o.a.createElement(me.a,{style:{marginTop:"10px"}},o.a.createElement(h.b,{to:"/dashboard"},o.a.createElement(v.a,{size:"small",color:"primary"},"Go to My Complaints"))))))}}]),a}(o.a.Component),xe=Object(y.a)((function(e){return{root:{maxWidth:"100%",marginRight:"10%",marginLeft:"10%",marginTop:"120px",marginBottom:"30px"}}}))(ye),Ce=a(299),Se=a.n(Ce),we=a(300),ke=a.n(we),Oe=a(298),Le=a.n(Oe),je=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(H.a,{container:!0,spacing:2,justify:"center"},o.a.createElement(H.a,{item:!0,xs:10,sm:10},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(C.a,{gutterBottom:!0,style:{textAlign:"center",fontSize:"2.7em"}},"Spot and Report"," ",o.a.createElement(Le.a,{style:{fontSize:50},color:"secondary"})," Potholes Now"),o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p",style:{textAlign:"center",fontSize:"1.5em",maxWidth:"400px"}},"Choose between either uploading a photo from the file system or using the camera to click a photo."))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement(H.a,{item:!0,xs:6,sm:5},o.a.createElement(x.a,{variant:"outlined",onClick:function(){return e.props.toggleCameraComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(Se.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From Camera"))),o.a.createElement(H.a,{item:!0,xs:6,sm:5},o.a.createElement(x.a,{variant:"outlined",onClick:function(){return e.props.toggleUploadComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(ke.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From File Manager")))))}}]),a}(o.a.Component),Ie=Object(y.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"300px",marginRight:"10px",marginLeft:"10px",borderRadius:"10px",border:"1px solid #212121"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(je),Re=a(672),Te=Object(Y.a)((function(e){return{root:{width:"60%","& > * + *":{marginTop:e.spacing(2)},marginTop:"180px"}}}));function De(){var e=Te();return o.a.createElement(H.a,{container:!0,spacing:2,justify:"center"},o.a.createElement("div",{className:e.root},o.a.createElement(Re.a,null)))}var Be,Ne=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).uploadClickedFile=function(e){re.removeCameraFromView(),re.setState({enableUploadFilesComponent:o.a.createElement(P,{label:"Preview uploading of your clicked image!",display:"block",updateFilePondRef:n.updateFilePondRef,validation:n.validation}),fileDataCopy:e})},n.updateFilePondRef=function(e){re.setState({filePondRef:e}),null!==re.state.fileDataCopy&&re.state.filePondRef.addFile(re.state.fileDataCopy)},n.validation=function(e){re.setState({buttons:null,validationMessage:o.a.createElement(De,null),validateComponent:o.a.createElement(W,{imageURL:e,validationCompleted:n.validationCompleted})})},n.validationCompleted=function(e){re.setState({validationMessage:o.a.createElement(xe,{userId:n.state.userId,reportData:e.data}),validateComponent:"",enableUploadFilesComponent:null})},n.toggleCameraComponent=function(){re.state.cameraEnabled?re.setState({enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:n.getButtons()}):re.setState({enableCameraComponent:o.a.createElement(O,{cameraClosed:n.onCloseCamera,onCapture:n.uploadClickedFile}),cameraEnabled:!0,uploadEnabled:!0,buttons:null})},n.toggleUploadComponent=function(){n.state.uploadEnabled||re.setState({enableUploadFilesComponent:o.a.createElement(P,{label:"Drag and Drop or Click to Upload a Single Image File!",display:"block",withCamera:!1,updateFilePondRef:n.updateFilePondRef,validation:n.validation}),uploadEnabled:!0,buttons:null})},n.onCloseCamera=function(){re.toggleCameraComponent()},n.removeCameraFromView=function(){re.setState({enableCameraComponent:null,cameraEnabled:!1})},n.state={filePondRef:null,validationMessage:null,validateComponent:null,enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:n.getButtons(),fileDataCopy:null,userId:e.userId},re=Object(f.a)(n),n}return Object(c.a)(a,[{key:"getButtons",value:function(){return o.a.createElement(Ie,{toggleCameraComponent:this.toggleCameraComponent,toggleUploadComponent:this.toggleUploadComponent})}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.buttons,this.state.enableCameraComponent,this.state.enableUploadFilesComponent,this.state.validateComponent,this.state.validationMessage)}}]),a}(o.a.Component),Fe=a(674),Ae=a(283),Pe=a(673),Ue=a(37),Me=a(203),We=a(196),ze=a.n(We),_e=Object(Me.a)((function(e){var t=e.breakpoints,a=e.spacing;return{card:Object(Ue.a)({width:"100%",maxWidth:500,borderRadius:a(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",overflow:"initial",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",paddingLeft:8,paddingRight:8,background:"linear-gradient(to right bottom, #1769aa, #33eaff)"},t.up("sm"),{textAlign:"left",flexDirection:"row-reverse"}),media:Object(Ue.a)({flexShrink:0,width:"50%",paddingTop:"34%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),media2:Object(Ue.a)({flexShrink:0,width:"30%",paddingTop:"35%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),overline:{lineHeight:2,color:"#ffffff",fontWeight:"bold",fontSize:"0.625rem",opacity:.7},heading:{fontWeight:"600",color:"#ffffff",letterSpacing:.3},button:Object(Ue.a)({fontWeight:"bold !important",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:100,paddingLeft:32,paddingRight:32,color:"#ffffff",textTransform:"none",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.32)"}},t.up("sm"),{width:"auto"})}})),qe=function(e){var t=_e();return o.a.createElement(se.a,{className:t.card},e.score>0&&o.a.createElement(pe.a,{className:t.media,image:"https://webstockreview.net/images/good-clipart-well-done-2.png"}),0===e.score&&o.a.createElement(pe.a,{className:t.media2,image:"https://ignitewoo.com/wp-content/uploads/2012/08/woocommerce-loyalty-rewards.png"}),o.a.createElement(ue.a,{className:t.content},o.a.createElement(C.a,{className:t.overline,variant:"overline"},"Every Detection Counts!"),o.a.createElement(C.a,{className:t.heading,variant:"h6",gutterBottom:!0},"Your Contribution Score"),o.a.createElement(Q.a,{style:{fontWeight:"bold",backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"},color:"primary",icon:o.a.createElement(ze.a,null),className:t.button,label:e.score+" / 100"})))},Ge=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={submittedCount:0,approvedCount:0,completedCount:0,score:0},M.a.post("https://www.onspot.click/api/reports",{data:{userId:n.props.userId}}).then((function(e){var t=e.data.filter((function(e){return"completed"===e.status})).length,a=e.data.filter((function(e){return"approved"===e.status})).length+t,o=e.data.filter((function(e){return"submitted"===e.status})).length+a,r=Math.ceil(100*(.7*parseFloat(a/o)+.3*parseFloat(t/a)));n.setState({submittedCount:o,approvedCount:a,completedCount:t,score:r||0})})),n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(se.a,{style:{marginTop:"125px",borderRadius:12,minWidth:256,maxWidth:500,textAlign:"center",marginLeft:"50px",marginRight:"50px"}},o.a.createElement(ue.a,null,o.a.createElement(Ae.a,{style:{width:120,height:120,margin:"auto",marginTop:"15px",marginBottom:"15px"},src:this.props.photoURL}),o.a.createElement("h3",{style:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0}},this.props.name),o.a.createElement("span",{style:{fontSize:14,color:"#9e9e9e",marginBottom:"1em"}},o.a.createElement("a",{href:"mailto:"+this.props.email},this.props.email))),o.a.createElement(Pe.a,{variant:"middle"}),o.a.createElement(Fe.a,{display:"flex"},o.a.createElement(Fe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Submitted"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.submittedCount)),o.a.createElement(Fe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Approved"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.approvedCount)),o.a.createElement(Fe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Completed"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.completedCount))),o.a.createElement("div",{style:{marginLeft:"20px",marginRight:"20px",marginTop:"20px"}},o.a.createElement("center",null,o.a.createElement(qe,{score:this.state.score})),o.a.createElement("br",null)))))}}]),a}(o.a.Component),Ve=a(2),He=a(301),Ye=a.n(He),Je=a(302),Ke=a(678),Ze=a(679),$e=a(693),Qe=a(201),Xe=a.n(Qe),et=a(304),tt=a.n(et),at=a(305),nt=a.n(at),ot=a(306),rt=a.n(ot),it=a(616),lt=a(303),ct=a.n(lt),st=Object(y.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(it.a),mt=Object(Y.a)({root:{backgroundColor:"#f1f8e9",zIndex:1,color:"#333",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}});function ut(e){var t,a=mt(),n=e.active,r=e.completed,i={};return i=2===Be.length?{1:o.a.createElement(Xe.a,null),2:o.a.createElement(ct.a,null)}:{1:o.a.createElement(Xe.a,null),2:o.a.createElement(tt.a,null),3:o.a.createElement(nt.a,null),4:o.a.createElement(rt.a,null)},o.a.createElement("div",{className:Object(Ve.default)(a.root,(t={},Object(Ue.a)(t,a.active,n),Object(Ue.a)(t,a.completed,r),t))},i[String(e.icon)])}function pt(e){var t=4===e.stepNumber?["Submitted","Cancelled"]:["Submitted","Approved","Working","Completed"];return Be=t,o.a.createElement("div",{style:{textAlign:"left",minWidth:"300px"}},o.a.createElement(Ke.a,{alternativeLabel:!0,activeStep:e.stepNumber,connector:o.a.createElement(st,null),style:{float:"left"}},t.map((function(e){return o.a.createElement(Ze.a,{key:e},o.a.createElement($e.a,{StepIconComponent:ut},e))}))))}var dt,gt=a(680),ht=a(24),ft=a(308),bt=a.n(ft),Et=a(309),vt=a.n(Et),yt=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(ie.a,{classes:{container:e.slider},value:this.props.value,min:1,max:10,step:1,valueLabelDisplay:"on",disabled:!0}))}}]),a}(o.a.Component),xt=Object(y.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(yt),Ct=function(e){return o.a.createElement(C.a,{gutterBottom:!0,style:{marginBottom:e.marginBottom,color:e.color}},o.a.createElement("b",null,e.text))},St=a(307),wt=a.n(St),kt=function(e){return o.a.createElement("div",{style:{color:"#333"}},o.a.createElement(wt.a,{avatar:"https://i.ibb.co/Nry0dDp/image.png",side:e.side,messages:e.messageArray}))},Ot=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setDescription=function(e){n.setState({commentText:e}),""===e?n.setState({buttonDisabled:!0}):n.setState({buttonDisabled:!1})},n.getAllComments=function(){M.a.post("https://www.onspot.click/api/reports/comments",{data:{caseId:n.state.caseId}}).then((function(e){dt.manageCommentData(e.data)})).catch((function(e){console.info("Problem with getting your comments!")}))},n.formatDateTime=function(e){var t=new Date(e),a=t.toLocaleString("en",{month:"long"}),n=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getDate()+" "+a+", "+t.getFullYear()+" @ "+n+" \u2192 \n"},n.manageCommentData=function(e){if(e.length>0){var t=e[0].userType,a=[],r=[],i=1;e.map((function(l){return l.userType===t?(a.push(n.formatDateTime(l.commentDateTime)+l.commentText),t=l.userType):(r.push(o.a.createElement(kt,{messageArray:a,side:dt.getChatMessageSide(t)})),t=l.userType,(a=[]).push(n.formatDateTime(l.commentDateTime)+l.commentText)),i===e.length&&r.push(o.a.createElement(kt,{messageArray:a,side:dt.getChatMessageSide(t)})),++i,l})),dt.setState({commentComponentArray:r})}return!0},n.getChatMessageSide=function(e){return"U"===e?"right":"left"},n.handleSubmit=function(){M.a.post("https://www.onspot.click/api/submit/report/comment",{data:n.state}).then((function(e){dt.setState({emptyDescriptionBox:!0}),dt.state.makeBoxEmptyFunction(),n.getAllComments()})).catch((function(e){console.info("Problem with submitting your comment!")}))},n.makeEmpty=function(e){dt.setState({makeBoxEmptyFunction:e})},n.state={commentText:"",caseId:e.caseNumber,userType:"U",buttonDisabled:!0,commentComponentArray:[],emptyDescriptionBox:!1,makeBoxEmptyFunction:""},dt=Object(f.a)(n),n.getAllComments(),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("br",null),this.state.commentComponentArray.map((function(e,t){return o.a.createElement("div",{key:t},e)})),o.a.createElement("br",null),o.a.createElement(de,{passMakeEmpty:this.makeEmpty,emptyBox:this.state.emptyDescriptionBox,updateDescription:dt.setDescription}),o.a.createElement(v.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:this.state.buttonDisabled,style:{fontSize:"15px",fontWeight:"bold"}},"Submit"))}}]),a}(o.a.Component),Lt=(a(416),Object(Y.a)({root:{maxWidth:700},media:{height:140},mediaMap:{height:200},headerTextColor:{color:"white"}}));function jt(e){var t=Lt(),a="https://maps.googleapis.com/maps/api/staticmap?size=512x512&format=png&style=feature:road.highway%7Celement:geometry%7Cvisibility:simplified%7Ccolor:0xc280e9&style=feature:transit.line%7Cvisibility:simplified%7Ccolor:0xbababa&style=feature:road.highway%7Celement:labels.text.stroke%7Cvisibility:on%7Ccolor:0xb06eba&style=feature:road.highway%7Celement:labels.text.fill%7Cvisibility:on%7Ccolor:0xffffff&visible="+e.data.latitude+","+e.data.longitude+"&markers=color:red%7Clabel:A%7C"+e.data.latitude+","+e.data.longitude+"&key="+p+"&zoom=15";return o.a.createElement(se.a,{style:{border:"2px solid rgba(255,255,255,0.1)"},className:t.root},o.a.createElement(pe.a,{className:t.media,image:e.data.imageURL}),o.a.createElement(ue.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"}),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},o.a.createElement(C.a,{gutterBottom:!0},o.a.createElement(bt.a,null),"\xa0 \xa0 ",e.data.dateTime),o.a.createElement("br",null),o.a.createElement(C.a,{gutterBottom:!0},o.a.createElement(vt.a,null),"\xa0 \xa0 ",e.data.fullLocation),o.a.createElement("br",null),o.a.createElement(Ct,{text:"Severity Rate",marginBottom:"40px",color:t.headerTextColor.color}),o.a.createElement(xt,{value:e.data.severity}),o.a.createElement("br",null),o.a.createElement(Ct,{text:"Status",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(pt,{stepNumber:e.data.stepNumber}),o.a.createElement("p",{style:{marginTop:"120px",textAlign:"justify"}},o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(Ct,{text:"Complaint Description",marginBottom:"15px",color:t.headerTextColor.color}),e.data.fullDescription),o.a.createElement("br",null),o.a.createElement(pe.a,{className:t.mediaMap,image:a}),o.a.createElement("br",null),o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(Ct,{text:"Comments",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(Ot,{caseNumber:e.data.caseNumber}))))}function It(e){var t,a=o.a.useState(!1),n=Object(z.a)(a,2),r=n[0],i=n[1],l=o.a.useState("paper"),c=Object(z.a)(l,2),s=c[0],m=c[1],u=Object(ht.a)(),p=Object(gt.a)(u.breakpoints.down("lg")),d=function(){i(!1)},g=o.a.useRef(null);return o.a.useEffect((function(){if(r){var e=g.current;null!==e&&e.focus()}}),[r]),o.a.createElement("div",null,o.a.createElement(v.a,{className:e.buttonContentStyles,onClick:(t="paper",function(){i(!0),m(t)})},"View report"),o.a.createElement(ge.a,{open:r,onClose:d,scroll:s,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",fullScreen:p},o.a.createElement(Ee.a,{id:"scroll-dialog-title"},"Report # ",e.caseNumber),o.a.createElement(fe.a,{dividers:"paper"===s},o.a.createElement(jt,{data:e})),o.a.createElement(he.a,null,o.a.createElement(v.a,{onClick:d,color:"primary"},"Close"))))}var Rt=Object(Me.a)((function(e){var t,a=e.breakpoints,n=e.spacing;return{root:Object(Ue.a)({margin:"auto",borderRadius:n(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",maxWidth:500,marginLeft:"auto",overflow:"initial",background:"#333",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:n(2)},a.up("md"),{flexDirection:"row",paddingTop:n(2)}),media:(t={width:"88%",marginLeft:"auto",marginRight:"auto",marginTop:n(-3),height:0,paddingBottom:"48%",borderRadius:n(2),backgroundColor:"#fff",position:"relative"},Object(Ue.a)(t,a.up("md"),{width:"100%",marginLeft:n(-3),marginTop:0,transform:"translateX(-8px)"}),Object(Ue.a)(t,"&:after",{content:'" "',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:n(2),opacity:.5}),t),content:{padding:24},cta:{marginTop:24,textTransform:"initial"}}})),Tt=Object(Me.a)((function(e){var t="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif";return{overline:{textTransform:"uppercase",letterSpacing:"1px",fontSize:12,marginBottom:"0.875em",display:"inline-block"},heading:{fontSize:20,fontWeight:"bold",marginBottom:"0.35em",fontFamily:t},body:{marginBottom:(0,e.spacing)(4),fontSize:"0.8rem",letterSpacing:"0.00938em",fontFamily:t,color:"#eeeeee"},button:{backgroundImage:"linear-gradient(147deg, #2997f7 0%, #2997f7 74%)",borderRadius:5,paddingLeft:24,paddingRight:24,color:"#ffffff",marginTop:"25px",float:"right"}}})),Dt=function(e){var t,n=Rt(),r=Tt(),i=Object(Je.useOverShadowStyles)(),l=a(417)(e.dateTime,"mmm d, yyyy"),c="submitted"===(t=e.status)?0:"approved"===t?1:"working"===t?2:"completed"===t?3:"cancelled"===t?4:void 0;return o.a.createElement(se.a,{className:Object(Ve.default)(n.root,i.root)},o.a.createElement(pe.a,{className:n.media,image:e.imageURL}),o.a.createElement(ue.a,null,o.a.createElement(Ye.a,{classes:r,overline:l,heading:e.location,body:e.description}),o.a.createElement(pt,{stepNumber:c}),o.a.createElement(It,{imageURL:e.imageURL,dateTime:l,location:e.location,fullDescription:e.fullDescription,fullLocation:e.fullLocation,stepNumber:c,severity:e.severity,caseNumber:e.caseNumber,latitude:e.latitude,longitude:e.longitude,buttonContentStyles:r.button})))},Bt=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={dashboardData:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;M.a.post("https://www.onspot.click/api/reports",{data:{userId:this.props.userId}}).then((function(t){e.setState({dashboardData:t.data})})).catch((function(e){console.info("Unable to retrieve user report")}))}},{key:"render",value:function(){return o.a.createElement("div",{style:{marginTop:"100px"}},o.a.createElement("div",{style:{textAlign:"center",color:"#fff"}}," ",o.a.createElement("div",{style:{display:"inline-block",backgroundColor:"#333",color:"#fff",paddingLeft:"60px",paddingRight:"60px",paddingTop:"5px",paddingBottom:"5px",fontWeight:"bold",fontSize:"20px",border:"2px solid #333",borderRadius:"5px"}},"Number of Reports \xa0 [ ",this.state.dashboardData.length," ]")),o.a.createElement("br",null),o.a.createElement("br",null),0===this.state.dashboardData.length&&o.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Reports yet. ",o.a.createElement("br",null)," Click the Floating Action Button ",o.a.createElement("br",null)," to start Reporting now."),o.a.createElement(H.a,{container:!0,spacing:3},this.state.dashboardData.map((function(e){return o.a.createElement(H.a,{key:e.case_id,item:!0,xs:12},o.a.createElement(Dt,{imageURL:e.imageURL,dateTime:e.created_date,fullLocation:e.location,fullDescription:e.description,location:e.location.length<27?e.location:e.location.substring(0,26)+" ...",description:e.description.lenght<150?e.description:e.description.substring(0,149)+" ...",status:e.status,severity:e.severity,caseNumber:e.case_id,latitude:e.latitude,longitude:e.longitude}),o.a.createElement("br",null),o.a.createElement("br",null))}))))}}]),a}(o.a.Component),Nt=a(124),Ft=a(85),At=Object(Nt.a)(Object(Nt.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+p+"&v=3.exp&libraries=geometry,drawing,places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),Object(Nt.d)((function(){return{isOpen:!1,infoIndex:null}}),{onToggleOpen:function(e){var t=e.isOpen;e.infoIndex;return function(e){return{isOpen:!t,infoIndex:e}}}}),Ft.withScriptjs,Ft.withGoogleMap,Object(Nt.b)({componentDidMount:function(){var e=this;(new google.maps.DirectionsService).route({origin:new google.maps.LatLng(parseFloat(this.props.startLat),parseFloat(this.props.startLng)),destination:new google.maps.LatLng(parseFloat(this.props.endLat),parseFloat(this.props.endLng)),travelMode:google.maps.TravelMode.DRIVING},(function(t,a){if(a===google.maps.DirectionsStatus.OK){var n=e,o=[];M.a.post("https://www.onspot.click/api/reports/all").then((function(a){a.data.forEach((function(e,a){google.maps.geometry.poly.isLocationOnEdge(new google.maps.LatLng(e.latitude,e.longitude),new google.maps.Polyline({path:t.routes[0].overview_path}),.001)&&o.push(e)})),n.setState({directions:t,selectedReports:o}),e.props.manageCounts(o.length,t.routes[0].legs[0].duration.text+" ("+t.routes[0].legs[0].distance.text+")",7)}))}else console.info("Error Fetching Directions")}))}}))((function(e){return o.a.createElement(Ft.GoogleMap,{defaultZoom:8,defaultCenter:{lat:parseFloat(e.centerLat),lng:parseFloat(e.centerLng)}},e.directions&&o.a.createElement(Ft.DirectionsRenderer,{directions:e.directions}),e.selectedReports.map((function(t,a){var n;n=parseInt(t.severity)<=3?"https://i.ibb.co/2dzSbjJ/output-onlinepngtools-2.png":parseInt(t.severity)<=6?"https://i.ibb.co/RC2LmDh/output-onlinepngtools-1.png":"https://i.ibb.co/kMZV43H/output-onlinepngtools.png";var r=new window.google.maps.MarkerImage(n,null,null,null,new window.google.maps.Size(48,48));return o.a.createElement(Ft.Marker,{icon:r,key:a,position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onClick:function(){return e.onToggleOpen(a)}},e.isOpen&&e.infoIndex===a&&o.a.createElement(Ft.InfoWindow,{onCloseClick:e.onToggleOpen,key:a,visible:!0},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3px",marginRight:"3px"}},o.a.createElement("div",{style:{color:"#212121",paddingRight:"10px",paddingBottom:"10px",fontWeight:"bold",lineHeight:1.5}},"Reported On: ",t.created_date.split(" ")[0],o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Current Status:"," ",t.status.charAt(0).toUpperCase()+t.status.slice(1),o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Reported Severity: ",t.severity,"/10"," "),o.a.createElement("div",null,o.a.createElement("img",{src:t.imageURL,width:"200px",style:{border:"2px solid black",borderRadius:"10px",marginRight:"10px",marginBottom:"10px"},alt:"Validated Pothole"})))))})))})),Pt=a(691),Ut=a(690),Mt=a(681),Wt=a(313),zt=a.n(Wt),_t=a(314),qt=a.n(_t),Gt=a(162),Vt=a.n(Gt),Ht=Object(Y.a)({root:{flexGrow:1,maxWidth:600,borderRadius:"3px",border:"1px SOLID #212121",marginBottom:"10px"}});function Yt(e){var t=Ht();return o.a.createElement("center",null,o.a.createElement(x.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Mt.a,{icon:o.a.createElement(zt.a,{color:"primary"}),label:e.totalCount+" Pothole(s)",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(qt.a,{color:"primary"}),label:e.eta,disabled:!0}))),o.a.createElement(x.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"#4747f4"}}),label:"Low Severity",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"orange"}}),label:"Medium Severity",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"red"}}),label:"High Severity",disabled:!0}))))}var Jt=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setSourceLocation=function(e,t){n.setState({startAddress:e,startLat:t.lat,startLng:t.lng})},n.setDestinationLocation=function(e,t){n.setState({endAddress:e,endLat:t.lat,endLng:t.lng})},n.manageCounts=function(e,t,a){n.setState({counterIndicators:o.a.createElement(Yt,{totalCount:e,eta:t,lowSeverity:7,mediumSeverity:8,highSeverity:10})})},n.submitOrignDestination=function(){n.setState({map:"Loading ... "},(function(){""!==n.state.startLat&&""!==n.state.startLng&&""!==n.state.endLat&&""!==n.state.endLng?n.setState({map:o.a.createElement("div",{style:{border:"2px SOLID white",borderRadius:"5px",marginTop:"15px"}},o.a.createElement(At,{manageCounts:n.manageCounts,centerLat:"-34.397",centerLng:"150.644",startLat:n.state.startLat,startLng:n.state.startLng,endLat:n.state.endLat,endLng:n.state.endLng,selectedReports:n.state.selectedReports,directions:!0}))}):n.setState({map:o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement(Pt.a,{variant:"filled",severity:"info"},"This is an error alert \u2014 Cannot make map, try again!"))})}))},n.state={centerLat:"",centerLng:"",startLat:"",startLng:"",endLat:"",endLng:"",startAddress:"",endAddress:"",selectedReports:[],map:"",counterIndicators:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(se.a,{className:t.root},o.a.createElement(ue.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Route It"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Use this to plan your travel, see the route to your destination and how severe it could be to travel. Also, monitor any route to see the progress for the reported pothole(s)."),o.a.createElement(ne,{label:"Source Location",updateLocation:this.setSourceLocation,currentLocationOptional:!0}),o.a.createElement(ne,{label:"Destination Location",updateLocation:this.setDestinationLocation,currentLocationOptional:!0}),o.a.createElement(v.a,{size:"large",color:"primary",onClick:function(){return e.submitOrignDestination()},className:t.buttonSubmit},"Get Route"),this.state.counterIndicators,this.state.map))}}]),a}(o.a.Component),Kt=Object(y.a)((function(e){return{root:{maxWidth:"100%",marginRight:"2%",marginLeft:"2%",marginTop:"100px",marginBottom:"30px"},buttonSubmit:{marginTop:"7px"},map:{border:"2px SOLID white",borderRadius:"5px"}}}))(Jt),Zt=a(202),$t=a(696),Qt=a(682),Xt=a(683),ea=a(684),ta=a(662),aa=a(661),na=a(315),oa=a.n(na),ra=a(317),ia=a.n(ra),la=a(318),ca=a.n(la),sa=a(685),ma=a(319),ua=a.n(ma),pa=a(321),da=a.n(pa),ga=a(322),ha=a.n(ga),fa=a(320),ba=a.n(fa),Ea=a(686),va=a(687),ya=a(316),xa=a.n(ya),Ca=Object(Y.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(Zt.a)(Object(Zt.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},inputRoot:{color:"inherit"},inputInput:Object(Ue.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function Sa(){var e=Ca(),t=Object(ht.a)(),a=o.a.useState(!1),n=Object(z.a)(a,2),r=n[0],i=n[1],l=o.a.useState("block"),c=Object(z.a)(l,2),s=c[0],m=c[1],u=function(){window.innerWidth<500&&m("block"),i(!1)};return o.a.createElement("div",{className:e.root},o.a.createElement(Qt.a,null),o.a.createElement(Xt.a,{position:"fixed",className:Object(Ve.default)(e.appBar,Object(Ue.a)({},e.appBarShift,r))},o.a.createElement(ea.a,null,o.a.createElement(aa.a,{color:"inherit","aria-label":"open drawer",onClick:function(){window.innerWidth<500&&m("none"),i(!0)},edge:"start",className:Object(Ve.default)(e.menuButton,r&&e.hide)},o.a.createElement(oa.a,null)),o.a.createElement(C.a,{style:{display:s},variant:"h5",noWrap:!0},"Onspot"),o.a.createElement("div",{style:{marginLeft:"auto"}},o.a.createElement(aa.a,{"aria-label":"GitHub",color:"inherit"},o.a.createElement("a",{href:"https://github.com/kuluruvineeth/onspot",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(xa.a,null)))))),o.a.createElement($t.a,{className:e.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:e.drawerPaper}},o.a.createElement("div",{className:e.drawerHeader},o.a.createElement(aa.a,{onClick:u},"ltr"===t.direction?o.a.createElement(ia.a,null):o.a.createElement(ca.a,null))),o.a.createElement(Pe.a,null),o.a.createElement(ta.a,null,o.a.createElement(h.b,{to:"/report"},o.a.createElement(sa.a,{onClick:u,button:!0,key:"Report"},o.a.createElement(Ea.a,null,o.a.createElement(ee.a,{color:"primary"})),o.a.createElement(va.a,{primary:"Report Pothole"}))),o.a.createElement(h.b,{to:"/"},o.a.createElement(sa.a,{onClick:u,button:!0,key:"Dashboard"},o.a.createElement(Ea.a,null,o.a.createElement(ua.a,{color:"primary"})),o.a.createElement(va.a,{primary:"My Complaints"}))),o.a.createElement(h.b,{to:"/routing"},o.a.createElement(sa.a,{onClick:u,button:!0,key:"Route Navigaton"},o.a.createElement(Ea.a,null,o.a.createElement(ba.a,{color:"primary"})),o.a.createElement(va.a,{primary:"Route Navigation"}))),o.a.createElement(h.b,{to:"/profile"},o.a.createElement(sa.a,{onClick:u,button:!0,key:"Profile"},o.a.createElement(Ea.a,null,o.a.createElement(da.a,{color:"primary"})),o.a.createElement(va.a,{primary:"Profile"})))),o.a.createElement(h.b,{to:"/logout"},o.a.createElement(sa.a,{onClick:u,button:!0,key:"Logout"},o.a.createElement(Ea.a,null,o.a.createElement(ha.a,{color:"primary"})),o.a.createElement(va.a,{primary:"Logout"})))))}var wa=a(324),ka=a.n(wa),Oa=a(688),La=function(){return o.a.createElement("div",{style:{marginTop:"50px"}})},ja=a(323),Ia=a.n(ja),Ra=Object(Y.a)({root:{maxWidth:345,padding:"20px",borderRadius:"10px",background:"url(https://i.ibb.co/7tx4DWf/back.jpg)"}});function Ta(){var e=Ra();return o.a.createElement(se.a,{className:e.root},o.a.createElement("img",{src:"https://i.ibb.co/TMh0Yb7/Onspot.png",style:{widht:"250px",height:"250px"},alt:"logo"}))}var Da=Object(Y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random?road)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),marginTop:"50px",backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:"50px",maxWidth:"250px",paddingTop:"15px",paddingBottom:"15px"}}}));function Ba(e){var t=Da();return o.a.createElement(H.a,{container:!0,component:"main",className:t.root},o.a.createElement(Qt.a,null),o.a.createElement(H.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),o.a.createElement(H.a,{item:!0,xs:12,sm:8,md:5,component:x.a,elevation:6,square:!0,style:{backgroundImage:"url('https://images.unsplash.com/photo-1543839482-a95d35fc5a77?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=900&q=80'), linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6))",backgroundBlendMode:"overlay",borderLeft:"5px SOLID #212121"}},o.a.createElement("div",{className:t.paper},o.a.createElement(C.a,{component:"h1",variant:"h1",style:{marginTop:"60px"}},o.a.createElement("b",null,o.a.createElement(Ta,null))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(C.a,{component:"h1",variant:"h4",style:{marginTop:"100px"}},o.a.createElement("b",null,"Citizen Log-In")),o.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return document.getElementsByClassName("abcRioButton")[0].click()}},o.a.createElement("b",null,"Sign In With Google \xa0",o.a.createElement(Ia.a,null))))))}var Na=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).callRender=function(e){window.gapi.load("signin2",(function(){var t={width:0,height:0,client_id:u,onsuccess:e,longTitle:!1,theme:"dark"};gapi.signin2.render("loginButton",t)}))},n.logout=function(e){n.state.isSignedIn?window.gapi.auth2.getAuthInstance().signOut().then((function(){n.setState({isSignedIn:n.auth2.isSignedIn.get()},(function(){localStorage.setItem("signedIn",!1),n.urlRedirect(e||"http://localhost:3000")}))})):console.info("Already Signed In")},n.urlRedirect=function(e){var t=setTimeout((function(){return window.location.replace(e),!0}),300);return(window.location=e)||(window.location.href=e)?(clearTimeout(t),!0):(clearTimeout(t),window.location.replace(e),!0)},n.validateAndPostProfileData=function(e){M.a.post(g,{data:{emailId:e.getEmail()}}).then((function(t){"allowed"===t.data?M.a.post("https://www.onspot.click/api/profile/update",{data:{userId:e.getId(),emailId:e.getEmail(),name:e.getName(),photoURL:e.getImageUrl()}}):(n.logout("http://localhost:3000"),console.info("Unauthorized Login"))})).catch((function(e){n.logout(),console.info("Cannot login at this time!")}))},n.navigationBar=function(){return o.a.createElement("div",null," ",o.a.createElement(Sa,null),o.a.createElement(h.b,{to:"/report"},o.a.createElement(Oa.a,{color:"secondary","aria-label":"add",style:{position:"fixed",zIndex:1,right:0,bottom:0,marginRight:"25px",marginBottom:"25px"}},o.a.createElement(ka.a,null))),o.a.createElement(La,null)," ")},n.isBlocked=function(){M.a.post(g,{data:{emailId:n.state.profileEmail}}).then((function(e){"allowed"!==e.data&&(n.logout("http://localhost:3000"),console.info("Unauthorized Login"))})).catch((function(e){n.logout(),console.info("Cannot login at this time!")}))},n.state={isSignedIn:!1,userId:"",profileName:"",profileEmail:"",profilePhotoURL:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init({client_id:u}),e.auth2.then((function(){var t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();e.setState({isSignedIn:e.auth2.isSignedIn.get(),userId:t.getId()||"",profileName:t.getName()||"",profileEmail:t.getEmail()||"",profilePhotoURL:t.getImageUrl()||""})}))})),this.callRender(t)}},{key:"onSuccess",value:function(){var e=this,t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();localStorage.setItem("signedIn",!0),this.setState({isSignedIn:!0,err:null,userId:t.getId(),profileName:t.getName(),profileEmail:t.getEmail(),profilePhotoURL:t.getImageUrl()},(function(){e.validateAndPostProfileData(t)}))}},{key:"onLoginFailed",value:function(e){this.setState({isSignedIn:!1,error:e})}},{key:"loginStatus",value:function(){if("true"===localStorage.getItem("signedIn")&&this.state.isSignedIn)switch(this.isBlocked(),this.props.linkTo){case"/dashboard":return o.a.createElement("div",null,o.a.createElement(Bt,{userId:this.state.userId}),this.navigationBar());case"/report":return o.a.createElement("div",null,o.a.createElement(Ne,{userId:this.state.userId}),this.navigationBar());case"/logout":this.logout();break;case"/routing":return o.a.createElement("div",null,o.a.createElement(Kt,{userId:this.state.userId}),this.navigationBar());case"/profile":return o.a.createElement("div",null,o.a.createElement(Ge,{userId:this.state.userId,name:this.state.profileName,email:this.state.profileEmail,photoURL:this.state.profilePhotoURL}),this.navigationBar());case"/":default:return o.a.createElement("div",null,o.a.createElement(Bt,{userId:this.state.userId}),this.navigationBar())}else{if("false"!==localStorage.getItem("signedIn")||!this.state.isSignedIn)return"true"!==localStorage.getItem("signedIn")?o.a.createElement("div",null,o.a.createElement("div",{id:"loginButton",style:{display:"none"}},"Login with Google"),o.a.createElement(Ba,null)):o.a.createElement("div",null);this.urlRedirect("http://localhost:3000")}}},{key:"render",value:function(){return o.a.createElement("div",null,this.loginStatus())}}]),a}(n.Component),Fa=a(23),Aa=(a(611),a(677)),Pa=a(83),Ua=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return window.location.href="https://www.onspot.click/onspot/404",o.a.createElement("div",null,"404")}}]),a}(o.a.Component),Ma=Object(Pa.a)({palette:{type:"dark",primary:{main:"#2997f7"},secondary:{main:"#ff0000"}},overrides:{MuiPaper:{root:{backgroundColor:"#333"}},MuiStepper:{root:{padding:"0px"}}}});var Wa=function(){return o.a.createElement(Aa.a,{theme:Ma},o.a.createElement(h.a,null,o.a.createElement("div",null,o.a.createElement(Fa.c,null,o.a.createElement(Fa.a,{path:"/report",exact:!0},o.a.createElement(Na,{linkTo:"/report"})),o.a.createElement(Fa.a,{path:"/profile",exact:!0},o.a.createElement(Na,{linkTo:"/profile"})),o.a.createElement(Fa.a,{path:"/logout",exact:!0},o.a.createElement(Na,{linkTo:"/logout"})),o.a.createElement(Fa.a,{path:"/routing",exact:!0},o.a.createElement(Na,{linkTo:"/routing"})),o.a.createElement(Fa.a,{path:"/dashboard",exact:!0},o.a.createElement(Na,{linkTo:"/dashboard"})),o.a.createElement(Fa.a,{path:"/",exact:!0},o.a.createElement(Na,{linkTo:"/dashboard"})),o.a.createElement(Fa.a,{path:"*",exact:!0,component:Ua})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Wa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[348,1,2]]]);
//# sourceMappingURL=main.f73173f0.chunk.js.map